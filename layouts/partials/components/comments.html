{{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment "production") }}
    {{ if or (in .Site.Params.mainSections .Section) .Params.comments }}

        <div class="load-comments">
            <div id="load-comments">{{ i18n "loadComments" }}</div>
        </div>

        {{ if .Site.Params.enableDisqus }}
            <div id="disqus_thread"></div>
            <script>

            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://lsongseven.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                        
        {{ end }}

        {{ if .Site.Params.enableValine }}
          <div id="vcomments"></div>
          <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
          <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

          <script type="text/javascript">
            new Valine({
                el: '#vcomments' ,
                appId: '{{ .Site.Params.valineAppId }}',
                appKey: '{{ .Site.Params.valineAppKey }}',
                // notify: '{{ .Site.Params.valine.notify }}', 
                // verify: '{{ .Site.Params.valine.verify }}', 
                avatar:'{{ .Site.Params.valineAvatar }}', 
                placeholder: '{{ .Site.Params.valinePlaceholder }}',
                visitor: '{{ .Site.Params.valineVisitor }}'
            });
          </script>
        {{ end }}

        {{ if .Site.Params.enableUtterances }}
            <div id="utterances"></div>
        {{ end }}

    {{ end }}
{{ end }}
